<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>اختبار الباورسيستم</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <style>
        body {
            height: 100vh;
            margin: 0;
            background-image: url(https://wallpaperaccess.com/full/2384075.jpg);
            background-size: cover;
            background-position: center;
            /* direction: rtl; */
            /* font-family: "Trirong", serif; */
            color: #222; 
        }

        .n {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            margin: 50px auto;
        }

        h5 {
            font-size: 1.6rem;
            font-weight: bold;
            color: #333;
        }

        .progress {
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            background-color: #e0e0e0;
        }

        .progress-bar {
            background-color: #007bff;
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .option-box {
            border: 2px solid #ddd;
            padding: 12px;
            margin-bottom: 10px;
            width: 100%;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
            /* text-align: right; */
            border-radius: 8px;
            transition: background 0.3s ease;
            background-color: #f9f9f9;
        }

        .option-box:hover {
            background-color: #f1f1f1;
        }

        .correct {
            background-color: #28a745 !important;
            color: white;
        }

        .incorrect {
            background-color: #dc3545 !important;
            color: white;
        }

        #score-container {
            font-size: 1.2rem;
            font-weight: bold;
            color: #444;
        }

        #end-of-page {
            margin-top: 40px;
            text-align: center;
            font-size: 0.95rem;
            color: #555;
        }

        #end-of-page a {
            color: #007bff;
            text-decoration: none;
        }

        #end-of-page a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .n {
                padding: 20px;
                margin: 20px auto;
            }

            h5 {
                font-size: 1.3rem;
            }

            .option-box {
                font-size: 0.95rem;
            }
        }
    </style>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Trirong">
</head>

<body>
    <div class="container n mt-5">
        <h5 class="text-center">اختبار البصمجة :) Protection </h5>
        <div class="progress mt-4">
            <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div id="score-container" class="text-center mt-4"></div>
        <hr />
        <hr />
        <div id="quiz-container" class="mt-4">
            <!-- Questions will be inserted here by JavaScript -->
        </div>
        <hr />
        <div id="end-of-page" class="mt-4">
            <p>خلاااااص هااانت ياا صديقي ياقي  10 ايام </p>
            <p><a href="https://github.com/Mohamed6061">Github</a></p>
            <p>
                <a href="https://www.linkedin.com/in/mohamed-abdel-fatah-0369b6221">linkedin</a>
            </p>
        </div>
    </div>

    <audio id="correct-sound" src="correct.mp3"></audio>
    <audio id="incorrect-sound" src="./g.mp3"></audio>

    <script>
        const questions = [
            {
                question: "The factors affecting the choice of protection are...",
                options: ["type and rating of equipment.", "location of the equipment.", "types of faults.", "points (A), (B), and (C)."],
                answer: 3 // D. points (A), (B), and (C)
            },
            {
                question: "The protective relaying is used to...",
                options: ["help the machines to operate in the fault conditions.", "give an alarm.", "cause prompt removal of any element of power system from service when that element behaves abnormal.", "points (B), and (C)."],
                answer: 3 // D. points (B), and (C)
            },
            {
                question: "The protection system has...",
                options: ["Trip circuit.", "crowbar protection system.", "fault current limiter.", "no correct answer mentioned."],
                answer: 0 // A. Trip circuit
            },
            {
                question: "The operation of the protective relay is...",
                options: ["manual.", "slow.", "fast.", "no correct answer mentioned."],
                answer: 2 // C. fast
            },
            {
                question: "When dead spot may exist?",
                options: ["when protective zones are smalls.", "when protective relay not work.", "points (A), and (B).", "no correct answer mentioned."],
                answer: 2 // C. points (A), and (B)
            },
            {
                question: "The first line of defense in the power system...",
                options: ["backup protection.", "primary protection.", "points (A), and (B).", "no correct answer mentioned."],
                answer: 1 // B. primary protection
            },
            {
                question: "The most faults occur in...",
                options: ["C.T. and P.T.", "overhead lines.", "transformers.", "points (A), (B), and (C)."],
                answer: 1 // B. overhead lines
            },
            {
                question: "From the essential qualities of protective relaying is...",
                options: ["Reliability.", "Adequateness.", "Speed and Time.", "All answers (A), (B), and (C)."],
                answer: 3 // D. All answers (A), (B), and (C)
            },
            {
                question: "Means (Relay time) is...",
                options: ["the time between the instant of fault occurrence and the instant of closure of relay contacts.", "the time between the instant at circuit breaker operates and opens the contacts, to the instant of extinguishing the arc completely.", "the total time required between the instant of fault and the instant of final arc interruption in the circuit breaker.", "the time taken by relay to operate after it has sensed the fault."],
                answer: 0 // B. the time between the instant at circuit breaker operates...
            },
            {
                question: "The current transformer consider...",
                options: ["Step-down transformer.", "Step-up transformer.", "Sometimes step-up and sometimes step-down.", "no correct answer."],
                answer: 1 // B. Step-up transformer
            },
            {
                question: "The basic function of a relay is...",
                options: ["Detect the fault.", "Interrupt the circuit.", "Both of these.", "None of these."],
                answer: 0
            },
            // ////////////////////
            {
                question: "The most dangerous fault on power systems is...",
                options: ["L-G.", "L-L.", "L-L-L.", "L-L-G."],
                answer: 2 // C. L-L-L
            },
            {
                question: "Backup protection is installed to...",
                options: ["Increase the protection reliability of the system.", "To increase the speed of protection system.", "Both of these.", "None of these."],
                answer: 0 
            },
            {
                question: "An overcurrent relay has a current setting of 120%. What is the pickup current if the rated primary current and transformation ratio of the current transformer is 200A and 100?",
                options: ["1.2", "240", "2.4", "120"],
                answer: 2 // C. 2.4
            },
            {
                question: "What is the PSM of a relay having a pickup current of 5A, when used with a transformer if the fault current in the circuit is 4000A?",
                options: ["25", "1", "50", "10"],
                answer: 3 // D. 10
            },
            {
                question: "A fault current of 1500A passing through the primary side of a 400/5 CT. On the secondary side an inverse time over current relay is connected whose current setting is 75%, the plug setting is...",
                options: ["5", "3.75", "6", "4"],
                answer: 0
            },
            {
                question: "Short circuit currents are due to...",
                options: ["single phase to ground fault.", "phase to phase faults.", "three phase faults.", "any of these."],
                answer: 3 // D. any of these
            },
            {
                question: "Directional relays are based on flow of...",
                options: ["Power.", "Current.", "voltage wave.", "all of the above."],
                answer: 0// D. all of the above
            },
            {
                question: "Protective relays are devices that detect abnormal conditions in electrical circuits by measuring...",
                options: ["current during abnormal condition.", "voltage during abnormal condition.", "constantly the electrical quantities which differ during normal and abnormal conditions.", "none of the above."],
                answer: 2 // C. constantly the electrical quantities
            },
            {
                question: "Admittance relay is... relay",
                options: ["impedance.", "directional.", "non-directional.", "none of the above."],
                answer: 1 // B. directional
            }
        ];


        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        let currentQuestionIndex = 0;
        let score = 0;

        function showQuestion(index) {
            const quizContainer = document.getElementById("quiz-container");
            quizContainer.innerHTML = `
            <div class="question-container l active">
            <h6 style="text-align:right">رقم السؤال ${index + 1} من ${questions.length}</h6>
            <h5 style="color: blue; font-weight: 600; direction: ltr;">${questions[index].question}</h5>
            <div id="options-container" style="color:black" class="d-flex flex-wrap"></div>
            </div>
        `;

            const optionsContainer = document.getElementById("options-container");
            questions[index].options.forEach((option, i) => {
                optionsContainer.innerHTML += `
                <h6 class="option-box" onclick="checkAnswer(${i})">${option}</h6> `;
            });
        }

        function checkAnswer(selectedIndex) {
            const answer = questions[currentQuestionIndex].answer;

            questions[currentQuestionIndex].selectedIndex = selectedIndex;

            if (selectedIndex === answer) {
                score++;
                document
                    .querySelectorAll(".option-box")
                [answer].classList.add("correct");
                document.getElementById("correct-sound").play();
            } else {
                document
                    .querySelectorAll(".option-box")
                [selectedIndex].classList.add("incorrect");
                document
                    .querySelectorAll(".option-box")
                [answer].classList.add("correct");
                document.getElementById("incorrect-sound").play();
            }

            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    showQuestion(currentQuestionIndex);
                    updateProgressBar();
                } else {
                    showScore();
                    showSolutions();
                }
            }, 1000);
        }

        function showScore() {
            const quizContainer = document.getElementById("quiz-container");
            const scoreContainer = document.getElementById("score-container");
            quizContainer.innerHTML = "";
            scoreContainer.innerHTML = `<h3>Your result ${score} from ${questions.length}</h3>`;
        }

        function showSolutions() {
            const quizContainer = document.getElementById("quiz-container");
            const solutionsContainer = document.createElement("div");
            solutionsContainer.classList.add("question-solution-container");
            quizContainer.appendChild(solutionsContainer);

            questions.forEach((question, index) => {
                const solutionDiv = document.createElement("div");
                solutionDiv.innerHTML = `
                <h6 style="color: red">${index + 1}. ${question.question}</h6>
                ${question.selectedIndex !== undefined ? `<p><strong>Your Choice:</strong> ${question.options[question.selectedIndex]}</p>` : ''}
                <p><strong>Correct Answer:</strong> ${question.options[question.answer]}</p>
                `;
                solutionsContainer.appendChild(solutionDiv);
            });
        }

        function updateProgressBar() {
            const progressBar = document.getElementById("progress-bar");
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressBar.setAttribute("aria-valuenow", progress);
        }

        document.addEventListener("DOMContentLoaded", () => {
            shuffle(questions); // Shuffle the questions array
            showQuestion(currentQuestionIndex);
            updateProgressBar();
        });
    </script>
</body>

</html>